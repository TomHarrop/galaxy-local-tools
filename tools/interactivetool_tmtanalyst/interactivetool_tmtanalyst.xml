<tool id="interactive_tool_tmtanalyst" tool_type="interactive" name="TMT Analyst" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="20.01" license="MIT">
    <description>Analyze and Visualize Label-Free Proteomics output from MaxQuant</description>

    <xrefs>
        <xref type="bio.tools">TMT-Analyst</xref>
    </xrefs>

    <macros>
	<token name="@TOOL_VERSION@">0.11</token>
        <token name="@VERSION_SUFFIX@">0</token>
        <token name="@PORT@">3838</token>
    </macros>

    <edam_topics>
        <edam_topic>topic_0121</edam_topic>
    </edam_topics>

    <edam_operations>
        <edam_operation>operation_3214</edam_operation>
    </edam_operations>

    <requirements>
        <container type="docker">haileyzhang/tmt-analyst:v@TOOL_VERSION@_galaxy</container>
    </requirements>


    <entry_points>
        <entry_point name="TMT-Analyst proteomics analysis" requires_domain="True">
            <port>@PORT@</port>
        </entry_point>
    </entry_points>

    <command detect_errors="exit_code"><![CDATA[

	mkdir -p /srv/shiny-server/external_data/ &&
	ln -s ${protein_groups} /srv/shiny-server/external_data/protein.xlsx &&
	ln -s ${design} /srv/shiny-server/external_data/experiment.txt && 
	exec shiny-server 2>&1


    ]]></command>

    <inputs>
        <param name="protein_groups" type="data" format="xlsx" label="Protein file" help="" />
        <param name="design" type="data" format="txt" label="Experimental Design Matrix" help="" />
    </inputs>

    <outputs>
        <data name="outfile" format="txt" label="${tool.name} on ${on_string}: Rscript" />
    </outputs>

    <tests>
        <!-- Hint: You can use [ctrl+alt+t] after defining the inputs/outputs to auto-scaffold some basic test cases. -->
    </tests>

    <help><![CDATA[

.. class:: infomark

TMT-Analyst
===========

A tool for analysing Tandem Mass Tag quantitative proteomics dataset
https://analyst-suites.org/apps/tmt-analyst/


Motivation
----------

-  Automate downstream statistical analysis of Tandem Mass Tag quantitative
   proteomics data (generated by MaxQuant)

Input
-----

-  Proteome Discoverer exports **Tabular information** protein file
-  An experiment design table (tab separated file) containing at least four
   columns ("label", "condition", "replicate", "batch")

Data pre-filtering criteria
---------------------------

-  Remove potential contaminants
-  Remove Protein FDR Confidence not equal to "High"
   peptide
-  Remove observation with high proportion of missing values (abundance 
   valid values must meet threshold in at least one condition)

    ]]></help>
    <citations>
        <citation type="doi">10.1021/acs.jproteome.9b00496</citation>
    </citations>
</tool>
