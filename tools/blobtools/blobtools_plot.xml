<tool id="blobtools_plot" name="Blobtools plot" version="1.1" >
    <description>Generate Blobtools plot</description>
    <xrefs>
        <xref type='bio.tools'>blobtools</xref>
    </xrefs>
    <macros>
	  <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <expand macro="stdio" />
    <expand macro="version_command" /> 
    <command><![CDATA[
	    @SET_TMP_DIR@ &&
	    cp $input_json input.json &&
	    blobtools plot
	    -i input.json 
	    -o output 

	    ]]></command>
    <inputs>
	    <param name="input_json" type="data" format="json" label="json File" help="Input BlobDB json file"/>
	    <section name="adv_options" title="Advance Options" expanded="False">
		<param argument="--notitle" type="boolean" truevalue="--notitle" falsevalue="" checked="false" label="Title" help="Do not add filename as title to plot"/>
		<param argument="--filelabel" type="boolean" truevalue="--filelabel" falsevalue="" checked="false" label="File Label" help="Label axis based on filenames"/>
                <param argument="--length" type="integer" value="100" label="Minimum Sequence Length" help="Minimum sequence length considered for plotting [default: 100]"/>
                <param argument="--cindex" type="boolean" truevalue="--cindex" falsevalue="" checked="false" label="Colour" help="Colour blobs by 'c index' [default: False]"/>
                <param argument="--nohit" type="boolean" truevalue="--nohit" falsevalue="" checked="false" label="Hide sequence" help="Hide sequences without taxonomic annotation [default: False]"/>
	        <param argument="--noscale" type="boolean" truevalue="--noscale" falsevalue="" checked="false" label="Scale sequence" help="Do no scale sequences by length [default: False]"/>
                <param argument="--legend" type="boolean" truevalue="--legend" falsevalue="" checked="false" label="Plot legend" help="Plot legend of bobplot in separate figure"/>
                <param argument="--multiplot" type="boolean" truevalue="--multiplot" falsevalue="" checked="false" label="Multi-plot" help="Print blobplot for each taxonomic separately"/>
                <param argument="--sort" type="text" value="span" label="Sort order" help="Sort order for plotting [default: span]"/>
                <param name="taxrule" type="select" display="radio" label="Taxonomy Rule" help="Taxonomy rule for computing taxonomy: default bestsum">
                      <option selected="true" value="bestsum">best sum</option>
                      <option value="bestsumorder">best sum order</option>
                </param>
                <param name="rank" type="select" display="radio" label="Taxonomic rank">
                          <option value="species">Species</option>
                          <option value="genus">Genus</option>
                          <option value="family">Family</option>
                          <option value="order">Order</option>
                          <option value="phylum" selected="true">Phylum</option>
                          <option value="superkingdom">Superkingdom</option>
                          <option value="all">All</option>
                </param>
                <param argument="--label" type="text" value="" label="Groups label" help="Relabel (taxonomic) groups, can be used several times."/>
	    </section>
    </inputs>
    <outputs>

	    <data name="coverage" format="png" from_work_dir="output*.blobplot.cov0.*" label="${tool.name} on ${on_string} : coverage"/>
	    <data name="read_coverage" format="png" from_work_dir="output*.read_cov.cov0.*" label="${tool.name} on ${on_string} : read coverage"/>
	    <data name="statistic" format="txt" from_work_dir="output*.stats.txt" label="${tool.name} on ${on_string} : statistics "/>
    </outputs>

    <tests>
	 <test>
            <!-- #1 test with common parameters -->
        </test>
    </tests>
    <help><![CDATA[

.. class:: infomark

**What it does**
	    
*K-mer Counter is a utility designed for counting k-mers (sequences of consecutive k symbols) in a set of reads from genome sequencing projects.*
	    
**Input**
	    
- input file - FASTA, FASTQ and BAM. Also, gipped versions of FASTA and FASTQ. 

**Example:**

- kmc -k27 -m24 NA19238.fastq NA.res /data/kmc_tmp_dir/
- kmc -k27 -m24 @files.lst NA.res /data/kmc_tmp_dir/

**Output**

- filename.res.kmc_suf
- filename.res.kmc_pre
 
.. class:: infomark
	    
**Contributor**

Galaxy Australia wrapped the Blobtools: the original software is available in this `Github repository <https://github.com/DRL/blobtools>`_.

**References**
 
     ]]></help>
     <citations>
        <citation type="doi">DOI: 10.12688/f1000research.12232.1</citation>
     </citations>
</tool>
