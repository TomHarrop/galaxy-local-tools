<tool id="dorado_pod5_convert" name="fast5 to pod5" version="@VERSION@+galaxy0" python_template_version="3.5" profile="21.05">
    <description>converter for raw Oxford Nanopore data</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="xrefs"/>
    <expand macro="requirements"/>
    <command><![CDATA[
    
ln -s '$fast5_in' ./input.fast5

&&

pod5 convert fast5
--threads \${GALAXY_SLOTS:-4}
--output output.pod5
input.fast5 

    ]]>
    </command>
    <inputs>
        <param name="fast5_in" type="data" format="fast5" label="Oxford Nanopore raw data in fast5 format"/>
    </inputs>
    <outputs>
        <data format="fast5" name="pod5_out" label="Oxford Nanopore raw data in in pod5 format" from_work_dir="output.pod5"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="fast5_in" value="FAL00375_473bf0ed_0.ten_reads.0_0.fast5"/>
            <output name="pod5_out" file="dorado_pod5_convert.test1.out.pod5" ftype="fast5"/>
        </test>
    </tests>
    <help><![CDATA[
        Convert fast5 to `pod5 <https://github.com/nanoporetech/pod5-file-format>`__ for basecalling with Dorado.
            ]]></help>
</tool>
