<tool id="dorado_test_basecaller" name="dorado test basecaller" version="@CONTAINER_HASH@+galaxy0" python_template_version="3.5" profile="21.05">
    <macros>
        <token name="@CONTAINER_HASH@">c2d8bc91ca2d043fed84d06cca92aaeb62bcc1cd</token>
    </macros>
    <requirements>
        <container type="docker">nanoporetech/dorado:sha@CONTAINER_HASH@</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
ln -s '$fast5_file' ./read.fast5 &&

dorado basecaller
"/models/dna_r9.4.1_e8_hac@v3.3"
read.fast5 
--gpu_runners_per_device 1
--chunks_per_runner 1
> output.sam
    ]]></command>
    <inputs>
        <param type="data" name="fast5_file" label="Raw fast5 file" format="fast5"/>
    </inputs>
    <outputs>
        <data format="sam" name="out_sam" label="Output from dorado list-models" from_work_dir="output.sam"/>
    </outputs>
    <tests>
        <test expect_num_outputs="1">
            <param name="fast5_file" value="fast5/20180130_MN24356_sequencing_run_69731_read_10005_ch_20_strand.fast5"/>
            <output name="out_sam" file="output.sam">
        </output>
        </test>
    </tests>
    <help><![CDATA[


    ]]></help>
</tool>
